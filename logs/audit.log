{"timestamp":"2025-10-02T18:07:04.306Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"CREATE TABLE dbo.Employee (\r\n    EmployeeID INT PRIMARY KEY IDENTITY(1,1),\r\n    FirstName NVARCHAR(50),\r\n    LastName NVARCHAR(50),\r\n    HireDate DATE,\r\n    Salary DECIMAL(10, 2),\r\n    UpdatedAt DATETIME NULL\r\n);","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T18:11:58.155Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"CREATE TABLE dbo.Employee (\r\n    EmployeeID INT PRIMARY KEY IDENTITY(1,1),\r\n    FirstName NVARCHAR(50),\r\n    LastName NVARCHAR(50),\r\n    HireDate DATE,\r\n    Salary DECIMAL(10, 2),\r\n    UpdatedAt DATETIME NULL\r\n);","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T18:12:18.317Z","action":"rollback","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"DROP TABLE [dbo].[Employee]","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T18:12:25.714Z","action":"rollback","env":"DEV","dryRun":false,"success":false,"error":"Cannot drop the table 'dbo.Employee', because it does not exist or you do not have permission.","scriptPreview":"DROP TABLE [dbo].[Employee]","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T18:15:14.640Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"CREATE TABLE dbo.Employee (\r\n    EmployeeID INT PRIMARY KEY IDENTITY(1,1),\r\n    FirstName NVARCHAR(50),\r\n    LastName NVARCHAR(50),\r\n    HireDate DATE,\r\n    Salary DECIMAL(10, 2),\r\n    UpdatedAt DATETIME NULL\r\n);","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T18:15:18.304Z","action":"apply","env":"DEV","dryRun":false,"success":true,"rowsAffected":[],"scriptPreview":"CREATE TABLE dbo.Employee (\r\n    EmployeeID INT PRIMARY KEY IDENTITY(1,1),\r\n    FirstName NVARCHAR(50),\r\n    LastName NVARCHAR(50),\r\n    HireDate DATE,\r\n    Salary DECIMAL(10, 2),\r\n    UpdatedAt DATETIME NULL\r\n);","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T18:15:22.021Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"-- No changes detected","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T18:15:30.601Z","action":"apply","env":"DEV","dryRun":false,"success":true,"rowsAffected":[],"scriptPreview":"-- No changes detected","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T18:15:37.665Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"-- No changes detected","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T18:15:47.493Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"-- No changes detected","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T18:15:48.580Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"-- No changes detected","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T18:15:49.570Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"-- No changes detected","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T18:15:53.121Z","action":"apply","env":"DEV","dryRun":false,"success":true,"rowsAffected":[],"scriptPreview":"-- No changes detected","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T18:21:23.360Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"-- No changes detected","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T18:25:42.359Z","action":"apply","env":"TEST","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"CREATE TABLE [dbo].[emp] (\n  [id] int NULL,\n  [Name] nvarchar(200) NULL,\n  [Salary] decimal(10,2) NULL\n);\n\nCREATE TABLE [dbo].[emp1] (\n  [id] int NULL\n);\n\nCREATE TABLE [dbo].[Emp12345] (\n  [Id] int NOT NULL,\n  [Name] nvarchar(200) NULL\n);","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T18:27:46.568Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"-- No changes detected","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T18:33:04.423Z","action":"apply","env":"LIVE","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"CREATE TABLE [dbo].[flyway_schema_history] (\n  [installed_rank] int NOT NULL,\n  [version] nvarchar(100) NULL,\n  [description] nvarchar(400) NULL,\n  [type] nvarchar(40) NOT NULL,\n  [script] nvarchar(2000) NOT NULL,\n  [checksum] int NULL,\n  [installed_by] nvarchar(200) NOT NULL,\n  [installed_on] datetime NOT NULL DEFAULT (getdate()),\n  [execution_time] int NOT NULL,\n  [success] bit NOT NULL\n);\n\n-- No changes detected","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T18:35:54.173Z","action":"rollback","env":"LIVE","dryRun":false,"success":true,"rowsAffected":[],"scriptPreview":"-- No rollback\n\nDROP TABLE [dbo].[flyway_schema_history]","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T18:47:56.241Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"-- No changes detected","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T18:47:59.838Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"-- No changes detected","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T18:48:06.978Z","action":"apply","env":"DEV","dryRun":false,"success":true,"rowsAffected":[],"scriptPreview":"-- No changes detected","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T18:48:16.829Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"-- No changes detected","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T18:48:24.213Z","action":"rollback","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"-- recreate primary key\nALTER TABLE [dbo].[Employee] ADD CONSTRAINT [PK__Employee__7AD04FF170CADE87] PRIMARY KEY ([EmployeeID]);","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T18:48:28.526Z","action":"rollback","env":"DEV","dryRun":false,"success":false,"error":"Could not create constraint or index. See previous errors.","scriptPreview":"-- recreate primary key\nALTER TABLE [dbo].[Employee] ADD CONSTRAINT [PK__Employee__7AD04FF170CADE87] PRIMARY KEY ([EmployeeID]);","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T18:56:38.538Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"-- No changes detected","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T18:57:20.010Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"-- No changes detected","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T18:57:20.797Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"-- No changes detected","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T18:57:24.205Z","action":"apply","env":"DEV","dryRun":false,"success":true,"rowsAffected":[],"scriptPreview":"-- No changes detected","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T19:48:55.620Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"-- No changes detected","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T19:53:41.997Z","action":"apply","env":"TEST","dryRun":false,"success":false,"error":"The specified schema name \"Sales\" either does not exist or you do not have permission to use it.","scriptPreview":"CREATE TABLE [Sales].[Customers] (\n  [CustomerID] nchar(10) NOT NULL,\n  [CompanyName] nvarchar(80) NOT NULL,\n  [ContactName] nvarchar(60) NULL,\n  [ContactTitle] nvarchar(60) NULL,\n  [Address] nvarchar(120) NULL,\n  [City] nvarchar(30) NULL,\n  [Region] nvarchar(30) NULL,\n  [PostalCode] nvarchar(20) NULL,\n  [Country] nvarchar(30) NULL,\n  [Phone] nvarchar(48) NULL,\n  [Fax] nvarchar(48) NULL\n);\n\nCREATE TABLE [Sales].[CustomersFeedback] (\n  [FeedbackID] int NOT NULL,\n  [CustomerID] nchar(10) NULL,\n  [FeedbackDate] datetime NULL DEFAULT (getdate()),\n  [Rating] int NULL,\n  [Comments] nvarchar(1000) NULL\n);","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"action":"apply","env":"TEST","success":false,"error":"{\n  \"success\": false,\n  \"message\": \"The specified schema name \\\"Sales\\\" either does not exist or you do not have permission to use it.\"\n}","scriptPreview":"CREATE TABLE [Sales].[Customers] (\n  [CustomerID] nchar(10) NOT NULL,\n  [CompanyName] nvarchar(80) NOT NULL,\n  [ContactName] nvarchar(60) NULL,\n  [ContactTitle] nvarchar(60) NULL,\n  [Address] nvarchar(120) NULL,\n  [City] nvarchar(30) NULL,\n  [Region] nvarchar(30) NULL,\n  [PostalCode] nvarchar(20) NULL,\n  [Country] nvarchar(30) NULL,\n  [Phone] nvarchar(48) NULL,\n  [Fax] nvarchar(48) NULL\n);\n\nCREATE TABLE [Sales].[CustomersFeedback] (\n  [FeedbackID] int NOT NULL,\n  [CustomerID] nchar(10) NULL,\n  [FeedbackDate] datetime NULL DEFAULT (getdate()),\n  [Rating] int NULL,\n  [Comments] nvarchar(1000) NULL\n);","user":null,"correlationId":null,"gitCommit":null,"timestamp":"2025-10-02T19:53:42.007Z"}
{"timestamp":"2025-10-02T19:54:05.311Z","action":"apply","env":"TEST","dryRun":false,"success":false,"error":"The specified schema name \"Sales\" either does not exist or you do not have permission to use it.","scriptPreview":"CREATE TABLE [Sales].[Customers] (\n  [CustomerID] nchar(10) NOT NULL,\n  [CompanyName] nvarchar(80) NOT NULL,\n  [ContactName] nvarchar(60) NULL,\n  [ContactTitle] nvarchar(60) NULL,\n  [Address] nvarchar(120) NULL,\n  [City] nvarchar(30) NULL,\n  [Region] nvarchar(30) NULL,\n  [PostalCode] nvarchar(20) NULL,\n  [Country] nvarchar(30) NULL,\n  [Phone] nvarchar(48) NULL,\n  [Fax] nvarchar(48) NULL\n);\n\nCREATE TABLE [Sales].[CustomersFeedback] (\n  [FeedbackID] int NOT NULL,\n  [CustomerID] nchar(10) NULL,\n  [FeedbackDate] datetime NULL DEFAULT (getdate()),\n  [Rating] int NULL,\n  [Comments] nvarchar(1000) NULL\n);","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"action":"apply","env":"TEST","success":false,"error":"{\n  \"success\": false,\n  \"message\": \"The specified schema name \\\"Sales\\\" either does not exist or you do not have permission to use it.\"\n}","scriptPreview":"CREATE TABLE [Sales].[Customers] (\n  [CustomerID] nchar(10) NOT NULL,\n  [CompanyName] nvarchar(80) NOT NULL,\n  [ContactName] nvarchar(60) NULL,\n  [ContactTitle] nvarchar(60) NULL,\n  [Address] nvarchar(120) NULL,\n  [City] nvarchar(30) NULL,\n  [Region] nvarchar(30) NULL,\n  [PostalCode] nvarchar(20) NULL,\n  [Country] nvarchar(30) NULL,\n  [Phone] nvarchar(48) NULL,\n  [Fax] nvarchar(48) NULL\n);\n\nCREATE TABLE [Sales].[CustomersFeedback] (\n  [FeedbackID] int NOT NULL,\n  [CustomerID] nchar(10) NULL,\n  [FeedbackDate] datetime NULL DEFAULT (getdate()),\n  [Rating] int NULL,\n  [Comments] nvarchar(1000) NULL\n);","user":null,"correlationId":null,"gitCommit":null,"timestamp":"2025-10-02T19:54:05.323Z"}
{"timestamp":"2025-10-02T20:07:57.052Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"CREATE TABLE dbo.TableEmp (\r\n  Id INT PRIMARY KEY,\r\n  Name NVARCHAR(100) NULL,\r\n  Salary DECIMAL(10,2) NULL\r\n);","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T20:08:00.818Z","action":"apply","env":"DEV","dryRun":false,"success":true,"rowsAffected":[],"scriptPreview":"CREATE TABLE dbo.TableEmp (\r\n  Id INT PRIMARY KEY,\r\n  Name NVARCHAR(100) NULL,\r\n  Salary DECIMAL(10,2) NULL\r\n);","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T20:08:07.509Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"-- No changes detected","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T20:08:09.910Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"-- No changes detected","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T20:08:12.357Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"-- No changes detected","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T20:08:14.801Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"-- No changes detected","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T20:08:25.582Z","action":"apply","env":"TEST","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"CREATE TABLE dbo.TableEmp (\r\n  Id INT PRIMARY KEY,\r\n  Name NVARCHAR(100) NULL,\r\n  Salary DECIMAL(10,2) NULL\r\n);","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T20:08:32.207Z","action":"apply","env":"TEST","dryRun":false,"success":true,"rowsAffected":[],"scriptPreview":"CREATE TABLE dbo.TableEmp (\r\n  Id INT PRIMARY KEY,\r\n  Name NVARCHAR(100) NULL,\r\n  Salary DECIMAL(10,2) NULL\r\n);","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T20:40:02.930Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"ALTER TABLE [dbo].[TableEmp] ADD Name NVARCHAR(100) NULL\nALTER TABLE [dbo].[TableEmp] ADD Salary DECIMAL(10,2) NULL\nALTER TABLE [dbo].[TableEmp] DROP COLUMN FName\nALTER TABLE [dbo].[TableEmp] DROP COLUMN Salary1","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T20:40:02.935Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"ALTER TABLE [dbo].[TableEmp] ADD Name NVARCHAR(100) NULL\nALTER TABLE [dbo].[TableEmp] ADD Salary DECIMAL(10,2) NULL\nALTER TABLE [dbo].[TableEmp] DROP COLUMN FName\nALTER TABLE [dbo].[TableEmp] DROP COLUMN Salary1","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T20:40:03.494Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"ALTER TABLE [dbo].[TableEmp] ADD Name NVARCHAR(100) NULL\nALTER TABLE [dbo].[TableEmp] ADD Salary DECIMAL(10,2) NULL\nALTER TABLE [dbo].[TableEmp] DROP COLUMN FName\nALTER TABLE [dbo].[TableEmp] DROP COLUMN Salary1","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T20:40:06.570Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"ALTER TABLE [dbo].[TableEmp] ADD Name NVARCHAR(100) NULL\nALTER TABLE [dbo].[TableEmp] ADD Salary DECIMAL(10,2) NULL\nALTER TABLE [dbo].[TableEmp] DROP COLUMN FName\nALTER TABLE [dbo].[TableEmp] DROP COLUMN Salary1","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T20:40:09.107Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"ALTER TABLE [dbo].[TableEmp] ADD Name NVARCHAR(100) NULL\nALTER TABLE [dbo].[TableEmp] ADD Salary DECIMAL(10,2) NULL\nALTER TABLE [dbo].[TableEmp] DROP COLUMN FName\nALTER TABLE [dbo].[TableEmp] DROP COLUMN Salary1","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T20:40:17.791Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"ALTER TABLE [dbo].[TableEmp] ADD Name NVARCHAR(100) NULL\nALTER TABLE [dbo].[TableEmp] ADD Salary DECIMAL(10,2) NULL\nALTER TABLE [dbo].[TableEmp] DROP COLUMN FName\nALTER TABLE [dbo].[TableEmp] DROP COLUMN Salary1","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T20:40:49.229Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"ALTER TABLE [dbo].[Emp] ADD Salary123 DECIMAL(10,2) NULL","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T20:40:58.898Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"-- No changes detected","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T20:41:15.533Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"ALTER TABLE [dbo].[TableEmp] ADD Name NVARCHAR(100) NULL\nALTER TABLE [dbo].[TableEmp] ADD Salary DECIMAL(10,2) NULL\nALTER TABLE [dbo].[TableEmp] DROP COLUMN FName\nALTER TABLE [dbo].[TableEmp] DROP COLUMN Salary1","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T20:41:29.068Z","action":"apply","env":"TEST","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"-- No changes detected","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T20:41:39.825Z","action":"apply","env":"LIVE","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"CREATE TABLE dbo.TableEmp (\r\n  Id INT PRIMARY KEY,\r\n  Name NVARCHAR(100) NULL,\r\n  Salary DECIMAL(10,2) NULL\r\n);","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T20:41:47.672Z","action":"apply","env":"LIVE","dryRun":false,"success":true,"rowsAffected":[],"scriptPreview":"CREATE TABLE dbo.TableEmp (\r\n  Id INT PRIMARY KEY,\r\n  Name NVARCHAR(100) NULL,\r\n  Salary DECIMAL(10,2) NULL\r\n);","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T20:41:50.928Z","action":"apply","env":"LIVE","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"-- No changes detected","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T20:42:38.367Z","action":"apply","env":"LIVE","dryRun":false,"success":true,"rowsAffected":[],"scriptPreview":"ALTER TABLE [dbo].[TableEmp] ADD FName nvarchar(200) NULL\nALTER TABLE [dbo].[TableEmp] ADD Salary1 decimal(10,2) NULL\nALTER TABLE [dbo].[TableEmp] DROP COLUMN Name\nALTER TABLE [dbo].[TableEmp] DROP COLUMN Salary","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T20:43:04.798Z","action":"apply","env":"LIVE","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"ALTER TABLE [dbo].[TableEmp] ADD FName nvarchar(200) NULL\nALTER TABLE [dbo].[TableEmp] ADD Salary1 decimal(10,2) NULL\nALTER TABLE [dbo].[TableEmp] DROP COLUMN Name\nALTER TABLE [dbo].[TableEmp] DROP COLUMN Salary","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T20:43:08.131Z","action":"rollback","env":"LIVE","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"ALTER TABLE [dbo].[TableEmp] ADD Salary decimal(9) NULL\nALTER TABLE [dbo].[TableEmp] ADD Name nvarchar(200) NULL\nALTER TABLE [dbo].[TableEmp] DROP COLUMN Salary1\nALTER TABLE [dbo].[TableEmp] DROP COLUMN FName\n-- recreate primary key\nALTER TABLE [dbo].[TableEmp] ADD CONSTRAINT [PK__TableEmp__3214EC07FA8C5245] PRIMARY KEY ([Id]);","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T20:43:45.042Z","action":"apply","env":"LIVE","dryRun":false,"success":true,"rowsAffected":[],"scriptPreview":"-- No changes detected","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T20:54:40.255Z","action":"apply","env":"LIVE","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"ALTER TABLE [dbo].[TableEmp] ADD Name NVARCHAR(100) NULL\nALTER TABLE [dbo].[TableEmp] ADD Salary DECIMAL(10,2) NULL\nALTER TABLE [dbo].[TableEmp] DROP COLUMN FName\nALTER TABLE [dbo].[TableEmp] DROP COLUMN Salary1","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T20:54:44.306Z","action":"apply","env":"LIVE","dryRun":false,"success":true,"rowsAffected":[],"scriptPreview":"ALTER TABLE [dbo].[TableEmp] ADD Name NVARCHAR(100) NULL\nALTER TABLE [dbo].[TableEmp] ADD Salary DECIMAL(10,2) NULL\nALTER TABLE [dbo].[TableEmp] DROP COLUMN FName\nALTER TABLE [dbo].[TableEmp] DROP COLUMN Salary1","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T20:55:34.215Z","action":"apply","env":"LIVE","dryRun":false,"success":false,"error":"The specified schema name \"Sales\" either does not exist or you do not have permission to use it.","scriptPreview":"ALTER TABLE [dbo].[TableEmp] ADD FName nvarchar(200) NULL\nALTER TABLE [dbo].[TableEmp] ADD Salary1 decimal(10,2) NULL\nALTER TABLE [dbo].[TableEmp] DROP COLUMN Name\nALTER TABLE [dbo].[TableEmp] DROP COLUMN Salary\n\nCREATE TABLE [Sales].[Customers] (\n  [CustomerID] nchar(10) NOT NULL,\n  [CompanyName] nvarchar(80) NOT NULL,\n  [ContactName] nvarchar(60) NULL,\n  [ContactTitle] nvarchar(60) NULL,\n  [Address] nvarchar(120) NULL,\n  [City] nvarchar(30) NULL,\n  [Region] nvarchar(30) NULL,\n  [PostalCode] nvarchar(20) NULL,\n  [Country] nvarchar(30) NULL,\n  [Phone] nvarchar(48) NULL,\n  [Fax] nvarchar(48) NULL\n);\n\nCREATE TABLE [Sales].[CustomersFeedback] (\n  [FeedbackID] int NOT NULL,\n  [CustomerID] nchar(10) NULL,\n  [FeedbackDate] datetime NULL DEFAULT (getdate()),\n  [Rating] int NULL,\n  [Comments] nvarchar(1000) NULL\n);\n\nCREATE TABLE [Logistics].[Flight] (\n  [FlightID] int NOT NULL,\n  [Airline] nvarchar(100) NOT NULL,\n  [DepartureCity] nvarchar(100) NOT NULL,\n  [ArrivalCity] nvarchar(100) NOT NULL,","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T20:56:16.608Z","action":"apply","env":"LIVE","dryRun":false,"success":false,"error":"Column names in each table must be unique. Column name 'FName' in table 'dbo.TableEmp' is specified more than once.","scriptPreview":"ALTER TABLE [dbo].[TableEmp] ADD FName nvarchar(200) NULL\nALTER TABLE [dbo].[TableEmp] ADD Salary1 decimal(10,2) NULL\nALTER TABLE [dbo].[TableEmp] DROP COLUMN Name\nALTER TABLE [dbo].[TableEmp] DROP COLUMN Salary\n\nCREATE TABLE [Sales].[Customers] (\n  [CustomerID] nchar(10) NOT NULL,\n  [CompanyName] nvarchar(80) NOT NULL,\n  [ContactName] nvarchar(60) NULL,\n  [ContactTitle] nvarchar(60) NULL,\n  [Address] nvarchar(120) NULL,\n  [City] nvarchar(30) NULL,\n  [Region] nvarchar(30) NULL,\n  [PostalCode] nvarchar(20) NULL,\n  [Country] nvarchar(30) NULL,\n  [Phone] nvarchar(48) NULL,\n  [Fax] nvarchar(48) NULL\n);\n\nCREATE TABLE [Sales].[CustomersFeedback] (\n  [FeedbackID] int NOT NULL,\n  [CustomerID] nchar(10) NULL,\n  [FeedbackDate] datetime NULL DEFAULT (getdate()),\n  [Rating] int NULL,\n  [Comments] nvarchar(1000) NULL\n);\n\nCREATE TABLE [Logistics].[Flight] (\n  [FlightID] int NOT NULL,\n  [Airline] nvarchar(100) NOT NULL,\n  [DepartureCity] nvarchar(100) NOT NULL,\n  [ArrivalCity] nvarchar(100) NOT NULL,","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T20:56:25.625Z","action":"apply","env":"LIVE","dryRun":false,"success":false,"error":"Column names in each table must be unique. Column name 'FName' in table 'dbo.TableEmp' is specified more than once.","scriptPreview":"ALTER TABLE [dbo].[TableEmp] ADD FName nvarchar(200) NULL\nALTER TABLE [dbo].[TableEmp] ADD Salary1 decimal(10,2) NULL\nALTER TABLE [dbo].[TableEmp] DROP COLUMN Name\nALTER TABLE [dbo].[TableEmp] DROP COLUMN Salary\n\nCREATE TABLE [Sales].[Customers] (\n  [CustomerID] nchar(10) NOT NULL,\n  [CompanyName] nvarchar(80) NOT NULL,\n  [ContactName] nvarchar(60) NULL,\n  [ContactTitle] nvarchar(60) NULL,\n  [Address] nvarchar(120) NULL,\n  [City] nvarchar(30) NULL,\n  [Region] nvarchar(30) NULL,\n  [PostalCode] nvarchar(20) NULL,\n  [Country] nvarchar(30) NULL,\n  [Phone] nvarchar(48) NULL,\n  [Fax] nvarchar(48) NULL\n);\n\nCREATE TABLE [Sales].[CustomersFeedback] (\n  [FeedbackID] int NOT NULL,\n  [CustomerID] nchar(10) NULL,\n  [FeedbackDate] datetime NULL DEFAULT (getdate()),\n  [Rating] int NULL,\n  [Comments] nvarchar(1000) NULL\n);\n\nCREATE TABLE [Logistics].[Flight] (\n  [FlightID] int NOT NULL,\n  [Airline] nvarchar(100) NOT NULL,\n  [DepartureCity] nvarchar(100) NOT NULL,\n  [ArrivalCity] nvarchar(100) NOT NULL,","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T20:56:41.714Z","action":"apply","env":"LIVE","dryRun":false,"success":false,"error":"The specified schema name \"Logistics\" either does not exist or you do not have permission to use it.","scriptPreview":"CREATE TABLE [Sales].[Customers] (\n  [CustomerID] nchar(10) NOT NULL,\n  [CompanyName] nvarchar(80) NOT NULL,\n  [ContactName] nvarchar(60) NULL,\n  [ContactTitle] nvarchar(60) NULL,\n  [Address] nvarchar(120) NULL,\n  [City] nvarchar(30) NULL,\n  [Region] nvarchar(30) NULL,\n  [PostalCode] nvarchar(20) NULL,\n  [Country] nvarchar(30) NULL,\n  [Phone] nvarchar(48) NULL,\n  [Fax] nvarchar(48) NULL\n);\n\nCREATE TABLE [Sales].[CustomersFeedback] (\n  [FeedbackID] int NOT NULL,\n  [CustomerID] nchar(10) NULL,\n  [FeedbackDate] datetime NULL DEFAULT (getdate()),\n  [Rating] int NULL,\n  [Comments] nvarchar(1000) NULL\n);\n\nCREATE TABLE [Logistics].[Flight] (\n  [FlightID] int NOT NULL,\n  [Airline] nvarchar(100) NOT NULL,\n  [DepartureCity] nvarchar(100) NOT NULL,\n  [ArrivalCity] nvarchar(100) NOT NULL,\n  [DepartureTime] datetime NOT NULL,\n  [ArrivalTime] datetime NOT NULL,\n  [Price] decimal(10,2) NOT NULL,\n  [AvailableSeats] int NOT NULL\n);\n\nCREATE TABLE [Logistics].[MaintenanceLog] (\n  [LogID] int NOT NULL,\n  ","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-02T20:57:40.945Z","action":"apply","env":"TEST","dryRun":false,"success":true,"rowsAffected":[],"scriptPreview":"CREATE TABLE [Sales].[Customers] (\n  [CustomerID] nchar(20) NOT NULL,\n  [CompanyName] nvarchar(160) NOT NULL,\n  [ContactName] nvarchar(120) NULL,\n  [ContactTitle] nvarchar(120) NULL,\n  [Address] nvarchar(240) NULL,\n  [City] nvarchar(60) NULL,\n  [Region] nvarchar(60) NULL,\n  [PostalCode] nvarchar(40) NULL,\n  [Country] nvarchar(60) NULL,\n  [Phone] nvarchar(96) NULL,\n  [Fax] nvarchar(96) NULL\n);\n\nCREATE TABLE [Sales].[CustomersFeedback] (\n  [FeedbackID] int NOT NULL,\n  [CustomerID] nchar(20) NULL,\n  [FeedbackDate] datetime NULL DEFAULT (getdate()),\n  [Rating] int NULL,\n  [Comments] nvarchar(2000) NULL\n);","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"env":"DEV","action":"test","user":"ui-test","timestamp":"2025-10-03T18:30:31.957Z","scriptPreview":"Client test audit"}
{"timestamp":"2025-10-03T18:53:31.547Z","action":"apply","env":"TEST","dryRun":false,"success":true,"rowsAffected":[],"scriptPreview":"-- No changes detected","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-03T18:53:34.571Z","action":"rollback","env":"TEST","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"-- No rollback","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-03T18:53:39.068Z","action":"rollback","env":"TEST","dryRun":false,"success":true,"rowsAffected":[],"scriptPreview":"-- No rollback","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-04T20:51:08.630Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"-- No changes detected","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-04T20:52:06.941Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"ALTER TABLE [dbo].[TableEmp] ADD Name NVARCHAR(100) NULL\nALTER TABLE [dbo].[TableEmp] ADD Salary DECIMAL(10,2) NULL\nALTER TABLE [dbo].[TableEmp] DROP COLUMN FName\nALTER TABLE [dbo].[TableEmp] DROP COLUMN Salary1","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-04T20:55:22.825Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"ALTER TABLE [dbo].[TableEmp] ADD Name NVARCHAR(100) NULL\nALTER TABLE [dbo].[TableEmp] ADD Salary DECIMAL(10,2) NULL\nALTER TABLE [dbo].[TableEmp] DROP COLUMN FName\nALTER TABLE [dbo].[TableEmp] DROP COLUMN Salary1","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-04T20:55:30.867Z","action":"apply","env":"DEV","dryRun":false,"success":true,"rowsAffected":[],"scriptPreview":"ALTER TABLE [dbo].[TableEmp] ADD Name NVARCHAR(100) NULL\nALTER TABLE [dbo].[TableEmp] ADD Salary DECIMAL(10,2) NULL\nALTER TABLE [dbo].[TableEmp] DROP COLUMN FName\nALTER TABLE [dbo].[TableEmp] DROP COLUMN Salary1","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"env":"DEV","action":"test","user":"ui-test","timestamp":"2025-10-04T21:19:40.545Z","scriptPreview":"Client test audit"}
{"env":"DEV","action":"apply","user":"ui-test","timestamp":"2025-10-04T21:20:10.151Z","scriptPreview":"Client test audit"}
{"timestamp":"2025-10-04T21:20:54.557Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"-- No changes detected","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-04T21:24:50.351Z","action":"apply","env":"TEST","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"-- No changes detected\n\n-- No changes detected","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-04T21:25:04.836Z","action":"apply","env":"TEST","dryRun":false,"success":true,"rowsAffected":[],"scriptPreview":"-- No changes detected\n\n-- No changes detected","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-04T21:36:06.202Z","action":"apply","env":"TEST","dryRun":false,"success":true,"rowsAffected":[],"scriptPreview":"-- No changes detected\n\n-- No changes detected\n\nCREATE TABLE [dbo].[test] (\n  [id] int NULL\n);","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-04T21:36:11.730Z","action":"rollback","env":"TEST","dryRun":false,"success":false,"error":"Could not create constraint or index. See previous errors.","scriptPreview":"DROP TABLE [dbo].[test]\n\nALTER TABLE [Sales].[CustomersFeedback] ADD CONSTRAINT [DF__Customers__Feedb__151B244E] DEFAULT (getdate()) FOR [FeedbackDate]\n\n-- recreate primary key\nALTER TABLE [dbo].[TableEmp] ADD CONSTRAINT [PK__TableEmp__3214EC074C5CDA0E] PRIMARY KEY ([Id]);","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-06T13:49:09.229Z","action":"apply","env":"TEST","dryRun":false,"success":false,"error":"'CREATE TRIGGER' must be the first statement in a query batch.","scriptPreview":"CREATE TABLE [distributordashboard].[Distributor] (\n  [DistributorId] int NOT NULL,\n  [DistributorCode] nvarchar(100) NOT NULL,\n  [DisplayName] nvarchar(400) NOT NULL,\n  [Region] nvarchar(200) NULL,\n  [IsActive] bit NOT NULL DEFAULT ((1)),\n  [CreatedAt] datetime2 NOT NULL DEFAULT (sysutcdatetime())\n);\n\nCREATE TABLE [distributordashboard].[DistributorSales] (\n  [SaleId] bigint NOT NULL,\n  [DistributorId] int NOT NULL,\n  [SaleDate] datetime2 NOT NULL,\n  [ProductCode] nvarchar(200) NULL,\n  [Quantity] int NOT NULL DEFAULT ((1)),\n  [UnitPrice] decimal(18,4) NOT NULL,\n  [Amount] AS (([Quantity]*[UnitPrice])),\n  [Notes] nvarchar(2000) NULL,\n  [CreatedAt] datetime2 NOT NULL DEFAULT (sysutcdatetime())\n);\n\nCREATE TABLE [distributordashboard].[DistributorSalesAudit] (\n  [AuditId] bigint NOT NULL,\n  [SaleId] bigint NULL,\n  [DistributorId] int NULL,\n  [SaleDate] datetime2 NULL,\n  [Amount] decimal(18,4) NULL,\n  [Operation] nvarchar(40) NOT NULL,\n  [ChangedAt] datetime2 NOT NULL DEFAULT (sysutcdateti","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"env":"TEST","action":"apply","user":"ui","scriptPreview":"CREATE TABLE [distributordashboard].[Distributor] (\n  [DistributorId] int NOT NULL,\n  [DistributorCode] nvarchar(100) NOT NULL,\n  [DisplayName] nvarchar(400) NOT NULL,\n  [Region] nvarchar(200) NULL,\n  [IsActive] bit NOT NULL DEFAULT ((1)),\n  [CreatedAt] datetime2 NOT NULL DEFAULT (sysutcdatetime())\n);\n\nCREATE TABLE [distributordashboard].[DistributorSales] (\n  [SaleId] bigint NOT NULL,\n  [DistributorId] int NOT NULL,\n  [SaleDate] datetime2 NOT NULL,\n  [ProductCode] nvarchar(200) NULL,\n  [Quantity] int NOT NULL DEFAULT ((1)),\n  [UnitPrice] decimal(18,4) NOT NULL,\n  [Amount] AS (([Quantity]*[UnitPrice])),\n  [Notes] nvarchar(2000) NULL,\n  [CreatedAt] datetime2 NOT NULL DEFAULT (sysutcdatetime())\n);\n\nCREATE TABLE [distributordashboard].[DistributorSalesAudit] (\n  [AuditId] bigint NOT NULL,\n  [SaleId] bigint NULL,\n  [DistributorId] int NULL,\n  [SaleDate] datetime2 NULL,\n  [Amount] decimal(18,4) NULL,\n  [Operation] nvarchar(40) NOT NULL,\n  [ChangedAt] datetime2 NOT NULL DEFAULT (sysutcdatetime()),\n  [ChangedBy] nvarchar(400) NULL,\n  [RawData] nvarchar(MAX) NULL\n);\n\n\r\nCREATE VIEW distributordashboard.vw_DistributorSalesSummary\r\nAS\r\nSELECT\r\n    d.DistributorId,\r\n    d.DistributorCode,\r\n    d.DisplayName,\r\n    d.Region,\r\n    COUNT(s.SaleId)    AS SaleCount,\r\n    SUM(s.Amount)      AS TotalSales,\r\n    MAX(s.SaleDate)    AS LastSaleDate\r\nFROM distributordashboard.Distributor d\r\nLEFT JOIN distributordashboard.DistributorSales s\r\n    ON s.DistributorId = d.DistributorId\r\nGROUP BY\r\n    d.DistributorId, d.DistributorCode, d.DisplayName, d.Region;\r\n\n\nCREATE PROCEDURE distributordashboard.usp_GetDistributorSummary\r\n    @DistributorId INT = NULL,      -- NULL => return all distributors\r\n    @RecentDays INT = 30            -- include recent sales within this many days\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n\r\n    -- return summary rows from view\r\n    SELECT\r\n        v.*\r\n\t\t--,\r\n  --      dbo.fn_Distributor_Exists = CASE WHEN EXISTS (SELECT 1 FROM distributordashboard.Distributor d WHERE d.Di","error":"'CREATE TRIGGER' must be the first statement in a query batch.","timestamp":"2025-10-06T13:49:09.234Z"}
{"timestamp":"2025-10-06T13:49:19.634Z","action":"apply","env":"TEST","dryRun":false,"success":false,"error":"'CREATE TRIGGER' must be the first statement in a query batch.","scriptPreview":"CREATE TABLE [distributordashboard].[Distributor] (\n  [DistributorId] int NOT NULL,\n  [DistributorCode] nvarchar(100) NOT NULL,\n  [DisplayName] nvarchar(400) NOT NULL,\n  [Region] nvarchar(200) NULL,\n  [IsActive] bit NOT NULL DEFAULT ((1)),\n  [CreatedAt] datetime2 NOT NULL DEFAULT (sysutcdatetime())\n);\n\nCREATE TABLE [distributordashboard].[DistributorSales] (\n  [SaleId] bigint NOT NULL,\n  [DistributorId] int NOT NULL,\n  [SaleDate] datetime2 NOT NULL,\n  [ProductCode] nvarchar(200) NULL,\n  [Quantity] int NOT NULL DEFAULT ((1)),\n  [UnitPrice] decimal(18,4) NOT NULL,\n  [Amount] AS (([Quantity]*[UnitPrice])),\n  [Notes] nvarchar(2000) NULL,\n  [CreatedAt] datetime2 NOT NULL DEFAULT (sysutcdatetime())\n);\n\nCREATE TABLE [distributordashboard].[DistributorSalesAudit] (\n  [AuditId] bigint NOT NULL,\n  [SaleId] bigint NULL,\n  [DistributorId] int NULL,\n  [SaleDate] datetime2 NULL,\n  [Amount] decimal(18,4) NULL,\n  [Operation] nvarchar(40) NOT NULL,\n  [ChangedAt] datetime2 NOT NULL DEFAULT (sysutcdateti","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"env":"TEST","action":"apply","user":"ui","scriptPreview":"CREATE TABLE [distributordashboard].[Distributor] (\n  [DistributorId] int NOT NULL,\n  [DistributorCode] nvarchar(100) NOT NULL,\n  [DisplayName] nvarchar(400) NOT NULL,\n  [Region] nvarchar(200) NULL,\n  [IsActive] bit NOT NULL DEFAULT ((1)),\n  [CreatedAt] datetime2 NOT NULL DEFAULT (sysutcdatetime())\n);\n\nCREATE TABLE [distributordashboard].[DistributorSales] (\n  [SaleId] bigint NOT NULL,\n  [DistributorId] int NOT NULL,\n  [SaleDate] datetime2 NOT NULL,\n  [ProductCode] nvarchar(200) NULL,\n  [Quantity] int NOT NULL DEFAULT ((1)),\n  [UnitPrice] decimal(18,4) NOT NULL,\n  [Amount] AS (([Quantity]*[UnitPrice])),\n  [Notes] nvarchar(2000) NULL,\n  [CreatedAt] datetime2 NOT NULL DEFAULT (sysutcdatetime())\n);\n\nCREATE TABLE [distributordashboard].[DistributorSalesAudit] (\n  [AuditId] bigint NOT NULL,\n  [SaleId] bigint NULL,\n  [DistributorId] int NULL,\n  [SaleDate] datetime2 NULL,\n  [Amount] decimal(18,4) NULL,\n  [Operation] nvarchar(40) NOT NULL,\n  [ChangedAt] datetime2 NOT NULL DEFAULT (sysutcdatetime()),\n  [ChangedBy] nvarchar(400) NULL,\n  [RawData] nvarchar(MAX) NULL\n);\n\n\r\nCREATE VIEW distributordashboard.vw_DistributorSalesSummary\r\nAS\r\nSELECT\r\n    d.DistributorId,\r\n    d.DistributorCode,\r\n    d.DisplayName,\r\n    d.Region,\r\n    COUNT(s.SaleId)    AS SaleCount,\r\n    SUM(s.Amount)      AS TotalSales,\r\n    MAX(s.SaleDate)    AS LastSaleDate\r\nFROM distributordashboard.Distributor d\r\nLEFT JOIN distributordashboard.DistributorSales s\r\n    ON s.DistributorId = d.DistributorId\r\nGROUP BY\r\n    d.DistributorId, d.DistributorCode, d.DisplayName, d.Region;\r\n\n\nCREATE PROCEDURE distributordashboard.usp_GetDistributorSummary\r\n    @DistributorId INT = NULL,      -- NULL => return all distributors\r\n    @RecentDays INT = 30            -- include recent sales within this many days\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n\r\n    -- return summary rows from view\r\n    SELECT\r\n        v.*\r\n\t\t--,\r\n  --      dbo.fn_Distributor_Exists = CASE WHEN EXISTS (SELECT 1 FROM distributordashboard.Distributor d WHERE d.Di","error":"'CREATE TRIGGER' must be the first statement in a query batch.","timestamp":"2025-10-06T13:49:19.640Z"}
{"timestamp":"2025-10-06T13:50:42.287Z","action":"apply","env":"TEST","dryRun":true,"success":false,"error":"'CREATE TRIGGER' must be the first statement in a query batch.","scriptPreview":"CREATE TABLE [distributordashboard].[Distributor] (\n  [DistributorId] int NOT NULL,\n  [DistributorCode] nvarchar(100) NOT NULL,\n  [DisplayName] nvarchar(400) NOT NULL,\n  [Region] nvarchar(200) NULL,\n  [IsActive] bit NOT NULL DEFAULT ((1)),\n  [CreatedAt] datetime2 NOT NULL DEFAULT (sysutcdatetime())\n);\n\nCREATE TABLE [distributordashboard].[DistributorSales] (\n  [SaleId] bigint NOT NULL,\n  [DistributorId] int NOT NULL,\n  [SaleDate] datetime2 NOT NULL,\n  [ProductCode] nvarchar(200) NULL,\n  [Quantity] int NOT NULL DEFAULT ((1)),\n  [UnitPrice] decimal(18,4) NOT NULL,\n  [Amount] AS (([Quantity]*[UnitPrice])),\n  [Notes] nvarchar(2000) NULL,\n  [CreatedAt] datetime2 NOT NULL DEFAULT (sysutcdatetime())\n);\n\nCREATE TABLE [distributordashboard].[DistributorSalesAudit] (\n  [AuditId] bigint NOT NULL,\n  [SaleId] bigint NULL,\n  [DistributorId] int NULL,\n  [SaleDate] datetime2 NULL,\n  [Amount] decimal(18,4) NULL,\n  [Operation] nvarchar(40) NOT NULL,\n  [ChangedAt] datetime2 NOT NULL DEFAULT (sysutcdateti","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-06T13:50:45.503Z","action":"apply","env":"TEST","dryRun":true,"success":false,"error":"'CREATE TRIGGER' must be the first statement in a query batch.","scriptPreview":"CREATE TABLE [distributordashboard].[Distributor] (\n  [DistributorId] int NOT NULL,\n  [DistributorCode] nvarchar(100) NOT NULL,\n  [DisplayName] nvarchar(400) NOT NULL,\n  [Region] nvarchar(200) NULL,\n  [IsActive] bit NOT NULL DEFAULT ((1)),\n  [CreatedAt] datetime2 NOT NULL DEFAULT (sysutcdatetime())\n);\n\nCREATE TABLE [distributordashboard].[DistributorSales] (\n  [SaleId] bigint NOT NULL,\n  [DistributorId] int NOT NULL,\n  [SaleDate] datetime2 NOT NULL,\n  [ProductCode] nvarchar(200) NULL,\n  [Quantity] int NOT NULL DEFAULT ((1)),\n  [UnitPrice] decimal(18,4) NOT NULL,\n  [Amount] AS (([Quantity]*[UnitPrice])),\n  [Notes] nvarchar(2000) NULL,\n  [CreatedAt] datetime2 NOT NULL DEFAULT (sysutcdatetime())\n);\n\nCREATE TABLE [distributordashboard].[DistributorSalesAudit] (\n  [AuditId] bigint NOT NULL,\n  [SaleId] bigint NULL,\n  [DistributorId] int NULL,\n  [SaleDate] datetime2 NULL,\n  [Amount] decimal(18,4) NULL,\n  [Operation] nvarchar(40) NOT NULL,\n  [ChangedAt] datetime2 NOT NULL DEFAULT (sysutcdateti","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-06T13:51:00.158Z","action":"rollback","env":"TEST","dryRun":false,"success":false,"error":"Cannot drop the table 'distributordashboard.Distributor', because it does not exist or you do not have permission.","scriptPreview":"-- No rollback generated\n\n-- No rollback generated\n\nDROP TRIGGER [distributordashboard].[trg_DistributorSales_Audit]\n\nDROP FUNCTION [distributordashboard].[ufn_GetDistributorTotal]\n\nDROP PROCEDURE [distributordashboard].[usp_GetDistributorSummary]\n\nDROP VIEW [distributordashboard].[vw_DistributorSalesSummary]\n\nDROP TABLE [distributordashboard].[DistributorSalesAudit]\n\nDROP TABLE [distributordashboard].[DistributorSales]\n\nDROP TABLE [distributordashboard].[Distributor]","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-06T14:03:51.049Z","action":"apply","env":"DEV","dryRun":true,"success":true,"rowsAffected":[],"scriptPreview":"-- No changes detected","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-06T14:20:24.598Z","action":"apply","env":"TEST","dryRun":true,"success":false,"error":"'CREATE TRIGGER' must be the first statement in a query batch.","scriptPreview":"CREATE TABLE [distributordashboard].[Distributor] (\n  [DistributorId] int NOT NULL,\n  [DistributorCode] nvarchar(100) NOT NULL,\n  [DisplayName] nvarchar(400) NOT NULL,\n  [Region] nvarchar(200) NULL,\n  [IsActive] bit NOT NULL DEFAULT ((1)),\n  [CreatedAt] datetime2 NOT NULL DEFAULT (sysutcdatetime())\n);\n\nCREATE TABLE [distributordashboard].[DistributorSales] (\n  [SaleId] bigint NOT NULL,\n  [DistributorId] int NOT NULL,\n  [SaleDate] datetime2 NOT NULL,\n  [ProductCode] nvarchar(200) NULL,\n  [Quantity] int NOT NULL DEFAULT ((1)),\n  [UnitPrice] decimal(18,4) NOT NULL,\n  [Amount] AS (([Quantity]*[UnitPrice])),\n  [Notes] nvarchar(2000) NULL,\n  [CreatedAt] datetime2 NOT NULL DEFAULT (sysutcdatetime())\n);\n\nCREATE TABLE [distributordashboard].[DistributorSalesAudit] (\n  [AuditId] bigint NOT NULL,\n  [SaleId] bigint NULL,\n  [DistributorId] int NULL,\n  [SaleDate] datetime2 NULL,\n  [Amount] decimal(18,4) NULL,\n  [Operation] nvarchar(40) NOT NULL,\n  [ChangedAt] datetime2 NOT NULL DEFAULT (sysutcdateti","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"env":"DEV","action":"test","user":"ui-test","timestamp":"2025-10-06T15:03:22.301Z","scriptPreview":"Client test audit"}
{"env":"DEV","action":"test","user":"ui-test","timestamp":"2025-10-06T20:38:04.174Z","scriptPreview":"Client test audit"}
{"env":"LIVE","action":"apply","user":"ui-test","timestamp":"2025-10-06T20:38:34.955Z","scriptPreview":"Client test audit"}
{"timestamp":"2025-10-08T16:08:40.946Z","action":"apply","env":"TEST","dryRun":true,"success":false,"error":"A RETURN statement with a return value cannot be used in this context.","scriptPreview":"ALTER TABLE [dbo].[LeadForm] ADD UTM_Source nvarchar(510) NULL\nALTER TABLE [dbo].[LeadForm] ADD UTM_Medium nvarchar(510) NULL\nALTER TABLE [dbo].[LeadForm] ADD UTM_Campaign nvarchar(510) NULL\nALTER TABLE [dbo].[LeadForm] ADD UTM_Content nvarchar(510) NULL\nALTER TABLE [dbo].[LeadForm] ADD UTM_Term nvarchar(510) NULL\n\n-- Replace PROCEDURE\nDROP PROCEDURE [dbo].[setLeadFormData]\nGO\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n   \r\n-- =============================================    \r\n-- Author: joep   \r\n-- Create date: 02-20-2024   \r\n-- Description: LeadForm insert sproc  \r\n--  \r\n --setLeadFormData @FirstName = N'joe3', @LastName = N'test1023', @email = 'joep@shop.com', @CellPhone = '8319159099',  \r\n -- @ReferralInfo = 'ufo@yopmail.com', @PortalData = 'shopmarketplace.com', @UTM = 'TikTok', @SiteType = 'SHP',  \r\n -- @Country = 'USA', @Language = 'ENG', @PCID = '001234567'  \r\n  \r\n --setLeadFormData @FirstName = N'名', @LastName = N'姓', @email = 'joep@shop.com', @CellPhone = '8319159099',  \r\n -- @ReferralInfo = 'u","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"timestamp":"2025-10-08T16:09:12.173Z","action":"apply","env":"TEST","dryRun":false,"success":false,"error":"A RETURN statement with a return value cannot be used in this context.","scriptPreview":"ALTER TABLE [dbo].[LeadForm] ADD UTM_Source nvarchar(510) NULL\nALTER TABLE [dbo].[LeadForm] ADD UTM_Medium nvarchar(510) NULL\nALTER TABLE [dbo].[LeadForm] ADD UTM_Campaign nvarchar(510) NULL\nALTER TABLE [dbo].[LeadForm] ADD UTM_Content nvarchar(510) NULL\nALTER TABLE [dbo].[LeadForm] ADD UTM_Term nvarchar(510) NULL\n\n-- Replace PROCEDURE\nDROP PROCEDURE [dbo].[setLeadFormData]\nGO\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n   \r\n-- =============================================    \r\n-- Author: joep   \r\n-- Create date: 02-20-2024   \r\n-- Description: LeadForm insert sproc  \r\n--  \r\n --setLeadFormData @FirstName = N'joe3', @LastName = N'test1023', @email = 'joep@shop.com', @CellPhone = '8319159099',  \r\n -- @ReferralInfo = 'ufo@yopmail.com', @PortalData = 'shopmarketplace.com', @UTM = 'TikTok', @SiteType = 'SHP',  \r\n -- @Country = 'USA', @Language = 'ENG', @PCID = '001234567'  \r\n  \r\n --setLeadFormData @FirstName = N'名', @LastName = N'姓', @email = 'joep@shop.com', @CellPhone = '8319159099',  \r\n -- @ReferralInfo = 'u","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"env":"TEST","action":"apply","user":"ui","scriptPreview":"ALTER TABLE [dbo].[LeadForm] ADD UTM_Source nvarchar(510) NULL\nALTER TABLE [dbo].[LeadForm] ADD UTM_Medium nvarchar(510) NULL\nALTER TABLE [dbo].[LeadForm] ADD UTM_Campaign nvarchar(510) NULL\nALTER TABLE [dbo].[LeadForm] ADD UTM_Content nvarchar(510) NULL\nALTER TABLE [dbo].[LeadForm] ADD UTM_Term nvarchar(510) NULL\n\n-- Replace PROCEDURE\nDROP PROCEDURE [dbo].[setLeadFormData]\nGO\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n   \r\n-- =============================================    \r\n-- Author: joep   \r\n-- Create date: 02-20-2024   \r\n-- Description: LeadForm insert sproc  \r\n--  \r\n --setLeadFormData @FirstName = N'joe3', @LastName = N'test1023', @email = 'joep@shop.com', @CellPhone = '8319159099',  \r\n -- @ReferralInfo = 'ufo@yopmail.com', @PortalData = 'shopmarketplace.com', @UTM = 'TikTok', @SiteType = 'SHP',  \r\n -- @Country = 'USA', @Language = 'ENG', @PCID = '001234567'  \r\n  \r\n --setLeadFormData @FirstName = N'名', @LastName = N'姓', @email = 'joep@shop.com', @CellPhone = '8319159099',  \r\n -- @ReferralInfo = 'ufo@yopmail.com', @PortalData = 'shopmarketplace.com', @UTM = 'TikTok', @SiteType = 'SHP',  \r\n -- @Country = 'USA', @Language = 'ENG', @PCID = '001234567', @PostalCode = '02343'  \r\n  \r\n--select * from LeadForm  \r\n--  \r\n-- 03-08-24 jp changed LastName to be optional (IDN requirement)  \r\n  \r\n-- 12-05-24 jp added @PostalCode  \r\n  \r\n-- 12-06-24 SN added @PostalCode name changed to @location  \r\n  \r\n --exec setLeadFormData @FirstName = N'Test', @LastName = N'test SN', @email = 'sethun@ma.com', @CellPhone = '111221111221',  \r\n -- @ReferralInfo = 'ufosn@yopmail.com', @PortalData = 'shopmarketplace.com', @UTM = 'TikTok', @SiteType = 'SHP',  \r\n -- @Country = 'USA', @Language = 'ENG', @PCID = '112255441', @Location = '27282', @Assigned =null ,@Status=null  \r\n -- , @Internal_Comment=null,@BestContactTime=null,@Interest=null   \r\n  \r\n -- 12-05-24 SN added @Lead_Comment   \r\n  \r\n -- 01/09/2025 added @Status to default value \"new\" if it is NULL  \r\n    -- 02/25/2025 added @SiteType to default value \"D\" i","error":"A RETURN statement with a return value cannot be used in this context.","timestamp":"2025-10-08T16:09:12.187Z"}
{"timestamp":"2025-10-08T18:57:23.741Z","action":"apply","env":"TEST","dryRun":false,"success":false,"error":"A RETURN statement with a return value cannot be used in this context.","scriptPreview":"-- No changes detected\n\n-- Replace PROCEDURE\nDROP PROCEDURE [dbo].[setLeadFormData]\nGO\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n   \r\n-- =============================================    \r\n-- Author: joep   \r\n-- Create date: 02-20-2024   \r\n-- Description: LeadForm insert sproc  \r\n--  \r\n --setLeadFormData @FirstName = N'joe3', @LastName = N'test1023', @email = 'joep@shop.com', @CellPhone = '8319159099',  \r\n -- @ReferralInfo = 'ufo@yopmail.com', @PortalData = 'shopmarketplace.com', @UTM = 'TikTok', @SiteType = 'SHP',  \r\n -- @Country = 'USA', @Language = 'ENG', @PCID = '001234567'  \r\n  \r\n --setLeadFormData @FirstName = N'名', @LastName = N'姓', @email = 'joep@shop.com', @CellPhone = '8319159099',  \r\n -- @ReferralInfo = 'ufo@yopmail.com', @PortalData = 'shopmarketplace.com', @UTM = 'TikTok', @SiteType = 'SHP',  \r\n -- @Country = 'USA', @Language = 'ENG', @PCID = '001234567', @PostalCode = '02343'  \r\n  \r\n--select * from LeadForm  \r\n--  \r\n-- 03-08-24 jp changed LastName to be optional (IDN requirement)  \r\n  \r\n-- ","user":null,"correlationId":null,"gitCommit":null,"clientIp":"::1"}
{"env":"TEST","action":"apply","user":"ui","scriptPreview":"-- No changes detected\n\n-- Replace PROCEDURE\nDROP PROCEDURE [dbo].[setLeadFormData]\nGO\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n   \r\n-- =============================================    \r\n-- Author: joep   \r\n-- Create date: 02-20-2024   \r\n-- Description: LeadForm insert sproc  \r\n--  \r\n --setLeadFormData @FirstName = N'joe3', @LastName = N'test1023', @email = 'joep@shop.com', @CellPhone = '8319159099',  \r\n -- @ReferralInfo = 'ufo@yopmail.com', @PortalData = 'shopmarketplace.com', @UTM = 'TikTok', @SiteType = 'SHP',  \r\n -- @Country = 'USA', @Language = 'ENG', @PCID = '001234567'  \r\n  \r\n --setLeadFormData @FirstName = N'名', @LastName = N'姓', @email = 'joep@shop.com', @CellPhone = '8319159099',  \r\n -- @ReferralInfo = 'ufo@yopmail.com', @PortalData = 'shopmarketplace.com', @UTM = 'TikTok', @SiteType = 'SHP',  \r\n -- @Country = 'USA', @Language = 'ENG', @PCID = '001234567', @PostalCode = '02343'  \r\n  \r\n--select * from LeadForm  \r\n--  \r\n-- 03-08-24 jp changed LastName to be optional (IDN requirement)  \r\n  \r\n-- 12-05-24 jp added @PostalCode  \r\n  \r\n-- 12-06-24 SN added @PostalCode name changed to @location  \r\n  \r\n --exec setLeadFormData @FirstName = N'Test', @LastName = N'test SN', @email = 'sethun@ma.com', @CellPhone = '111221111221',  \r\n -- @ReferralInfo = 'ufosn@yopmail.com', @PortalData = 'shopmarketplace.com', @UTM = 'TikTok', @SiteType = 'SHP',  \r\n -- @Country = 'USA', @Language = 'ENG', @PCID = '112255441', @Location = '27282', @Assigned =null ,@Status=null  \r\n -- , @Internal_Comment=null,@BestContactTime=null,@Interest=null   \r\n  \r\n -- 12-05-24 SN added @Lead_Comment   \r\n  \r\n -- 01/09/2025 added @Status to default value \"new\" if it is NULL  \r\n    -- 02/25/2025 added @SiteType to default value \"D\" if it is NULL  \r\n -- 04/01/2025 Added  SN  dded Opened_On,   Pending_On,   Closed_On columns   \r\n\r\n -- 10/7/2025 Added  SN  dded UTM_Source, UTM_Medium, UTM_Campaign, UTM_Content, UTM_Term columns   \r\n  \r\n  \r\n-- =============================================    \r\nCREATE PROCEDURE [dbo].[setLead","error":"A RETURN statement with a return value cannot be used in this context.","timestamp":"2025-10-08T18:57:23.744Z"}
{"env":"DEV","action":"test","user":"ui-test","timestamp":"2025-10-08T19:09:24.672Z","scriptPreview":"Client test audit"}
